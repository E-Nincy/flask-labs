{% extends "base.html" %}
{% import "_macros.html" as macros %}

{% block body %}
<section class="header">
  <h2 class="title">Dead simple Todolists.</h2>
  <div class="row">
    <div class="three columns value-prop"></div>
    <div class="six columns">

      {% if form.errors %}
        <div class="has-error">
          <strong>Todos should neither be empty nor be longer than 128 characters.</strong>
        </div>
      {% endif %}

      <form action="{{ url_for('main.new_todolist') }}" method="post">
        {{ form.hidden_tag() }}
        <div>
          {{ form.title(class_="u-full-width", placeholder="Enter your todolist title", maxlength=128) }}
        </div>
        <div>
          {{ form.submit(class="button button-primary", value="Start one now") }}
        </div>
      </form>

      <hr>

      {% for todolist in todolists %}
        <h3>{{ todolist.title }}</h3>

        <h4>Open tasks</h4>
        <ul>
          {% for todo in todolist.open_pagination.items %}
            <li>{{ todo.description }} <span style="color: red;">(open)</span></li>
          {% endfor %}
        </ul>
        {{ macros.render_pagination(
            todolist.open_pagination,
            'main.index',
            kwargs={'open_page_' ~ todolist.id|string: todolist.open_pagination.page},
            type='open'
        ) }}

        <h4>Finished tasks</h4>
        <ul>
          {% for todo in todolist.finished_pagination.items %}
            <li>{{ todo.description }} <span style="color: green;">(finished)</span></li>
          {% endfor %}
        </ul>
        {{ macros.render_pagination(
            todolist.finished_pagination,
            'main.index',
            kwargs={'finished_page_' ~ todolist.id|string: todolist.finished_pagination.page},
            type='finished'
        ) }}

      {% endfor %}

      {{ macros.render_pagination(pagination, 'main.index') }}

    </div>
  </div>
</section>
{% endblock %}


