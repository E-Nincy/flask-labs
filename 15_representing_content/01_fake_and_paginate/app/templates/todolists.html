{% extends "base.html" %}

{% block js %}
<script src="{{ url_for('static', filename='js/todolist.js') }}"></script>
{% endblock %}

{% block body %}
<section class="header">
  <h2 class="title">Your Todolists</h2>
  <div class="row">
    <div class="six columns">
      <form action="{{ url_for('main.new_todolist') }}" method="post">
        {{ form.hidden_tag() }}
        <dl>
          <dd>{{ form.title(class_="u-full-width", placeholder="Enter a title to start a new todolist", value="", maxlength=128) }}
          <dt>{{ form.submit }}
        </dl>
      </form>
    </div>
  </div>

  <div class="row">
    <div class="u-full-width">
      <h6 class="docs-header todolist-overview">All your todolists</h6>
      <table id="todolist-overview-table" class="tablesorter">
        <thead>
          <tr>
            <th style="width:50%">Todolist title</th>
            <th># Open</th>
            <th># Finished</th>
            <th class="datetime">Created at</th>
          </tr>
        </thead>
        <tbody>
          {% for todolist in current_user.todolists %}
          <tr>
            <td>
              <a href="{{ url_for('main.show_todolist', id=todolist.id) }}">
                {{ todolist.title|title }}
              </a>
            </td>
            <td>{{ todolist.open_count }}</td>
            <td>{{ todolist.finished_count }}</td>
            <td data-time-in-seconds="{{ todolist.created_at|in_seconds }}">{{ todolist.created_at|humanize }}</td>
          </tr>
          {% endfor %}
        </tbody>
      </table>
    </div>
  </div>
</section>
{% endblock %}

